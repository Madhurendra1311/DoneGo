{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/madhu/Documents/DoneGo/Client/src/Components/SignIn.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport axios from 'axios';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { fade, makeStyles } from '@material-ui/core/styles';\nimport InputBox from './InputBox';\nimport styled from \"styled-components\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { useHistory, Redirect, Link } from 'react-router-dom';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { loginSuccess } from '../Redux/User/action';\nvar intervalId = 0;\nconst Wrapper = styled.div`\n\tposition:relative;\n\tpadding: 25px 25px 100px 25px;\n\tbackground-color:#ffffff;\n\tborder-radius:5px;\n\t> h2{\n\t\ttext-align:center\n\t}\n\t> div > input{\n\t\tbackground-color: 'white';\n\t\tcolor:#000;\n\t\tborder-radius:5px;\n\t\tborder:  ${props => !props.chgClr ? '1px solid black' : '1px solid red'};\n\t\t\n\t}\n`;\n_c = Wrapper;\nconst Showvalue = styled.div`\n\tfont-size: 20px;\n\tposition:absolute;\n\tleft: 10vw;\n\tcolor: black;\n`;\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  ButtonBackground: {\n    backgroundColor: 'rgb(0, 210, 144)',\n    borderRadius: '20px',\n    padding: '8px 20px',\n    fontWeight: 'bold',\n    fontSize: '12px',\n    cursor: 'pointer',\n    color: 'white'\n  }\n}));\nexport default function SignIn() {\n  _s();\n\n  const [open, setOpen] = React.useState(false);\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [mobile, setMobile] = React.useState(\"\");\n  const [isMobileValid, setIsMobileValid] = React.useState(false);\n  const [isOtpSent, setIsOtpSent] = React.useState(false);\n  const [isMobileDisabled, setMobileDisabled] = React.useState(undefined);\n  const [pinValue, setPinValue] = React.useState('');\n  const [full, setFull] = React.useState(undefined);\n  const [timeLeft, setTimeLeft] = React.useState(30);\n  const [isVerifyButton, setIsVerifyButton] = React.useState(false);\n  const isAuth = useSelector(state => state.user.isAuth);\n  React.useEffect(() => {\n    if (isOtpSent) {\n      if (!timeLeft) return;\n      intervalId = setInterval(() => {\n        setTimeLeft(timeLeft - 1);\n      }, 1000);\n      return () => {\n        clearInterval(intervalId);\n      };\n    }\n  }, [timeLeft, isOtpSent]);\n\n  const handleMobileChange = e => {\n    setMobile(e.target.value);\n\n    if (e.target.value.toString().length === 10) {\n      if (Number(e.target.value.toString()[0]) > 5) {\n        setIsMobileValid(true);\n      } else {\n        setIsMobileValid(false);\n      }\n    } else {\n      setIsMobileValid(false);\n    }\n  };\n\n  const handleSentOtp = () => {\n    //API call for sent OTP\n    axios.get('http://localhost:5000/user/loginOtp', {\n      params: {\n        mobile: mobile\n      }\n    }).then(res => {\n      if (res.data.status === 'pending') {\n        setIsOtpSent(true);\n        setMobileDisabled(true);\n      }\n\n      console.log(res.data);\n    });\n  };\n\n  const handleEditNumber = () => {\n    setMobileDisabled(false);\n    setIsOtpSent(false);\n    setIsVerifyButton(false);\n    setTimeLeft(30);\n  };\n\n  const handleResendOtp = () => {\n    //API call for sent OTP\n    axios.get('http://localhost:5000/user/loginOtp', {\n      params: {\n        mobile: mobile\n      }\n    }).then(res => {\n      if (res.data.status === 'pending') {\n        setIsOtpSent(true);\n        setTimeLeft(30);\n      }\n\n      console.log(res.data);\n    });\n  };\n\n  const handleOtpChange = (value, inpLen) => {\n    setPinValue(value);\n    setFull(value.split(\"\").length === inpLen ? true : false);\n\n    if (value.split(\"\").length === 6) {\n      // API call for Verify OTP\n      setIsVerifyButton(true);\n      setFull(false);\n      axios.get('http://localhost:5000/user/verify', {\n        params: {\n          mobile: mobile,\n          code: value\n        }\n      }).then(res => {\n        if (res.data.message === 'Wrong OTP, Please try again') {\n          setFull(true);\n        } else {\n          window.localStorage.setItem('token', res.data.accessToken);\n          setFull(false);\n          handleClose(); //alert(res.data.message)\n\n          dispatch(loginSuccess());\n          console.log(res.data);\n        }\n      });\n    } else {\n      setFull(false);\n      setIsVerifyButton(false);\n    }\n  };\n\n  const handleVerifyOtp = () => {\n    // API call for Verify OTP\n    axios.get('http://localhost:5000/user/verify', {\n      params: {\n        mobile: mobile,\n        code: pinValue\n      }\n    }).then(res => {\n      if (res.data.message === 'Wrong OTP, Please try again') {\n        setFull(true);\n      } else {\n        window.localStorage.setItem('token', res.data.accessToken);\n        setFull(false);\n        handleClose(); //alert(res.data.message)\n\n        dispatch(loginSuccess());\n        console.log(res.data);\n      }\n    });\n  };\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setMobile('');\n    setTimeLeft(30);\n    setIsOtpSent(false);\n    setMobileDisabled(undefined);\n    setIsVerifyButton(false);\n    setPinValue('');\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!isAuth ? /*#__PURE__*/_jsxDEV(Button, {\n      className: classes.ButtonBackground,\n      color: \"inherit\",\n      onClick: handleClickOpen,\n      children: \"Sign In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/order/profile\",\n      children: /*#__PURE__*/_jsxDEV(IconButton, {\n        style: {\n          color: \"rgb(0, 210, 144)\",\n          backgroundColor: \"white\",\n          padding: \"0px\"\n        },\n        \"aria-label\": \"add to shopping cart\",\n        children: /*#__PURE__*/_jsxDEV(AccountCircleIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 41\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: open,\n      \"aria-labelledby\": \"form-dialog-title\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"form-dialog-title\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(DialogContentText, {\n          children: \"To subscribe to this website, please enter your email address here. We will send updates occasionally.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          autoFocus: true,\n          margin: \"dense\",\n          id: \"number\",\n          type: \"number\",\n          fullWidth: true,\n          value: mobile,\n          disabled: isMobileDisabled,\n          onChange: handleMobileChange,\n          onInput: e => e.target.value = e.target.value.slice(0, 10)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), !isMobileValid ? /*#__PURE__*/_jsxDEV(Button, {\n        disabled: true,\n        color: \"primary\",\n        children: \"Send OTP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 13\n      }, this) : !isOtpSent ? /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleSentOtp,\n        color: \"primary\",\n        children: \"Send OTP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 15\n      }, this) : /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleEditNumber,\n        color: \"primary\",\n        children: \"Edit Number\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 15\n      }, this), isOtpSent ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [timeLeft === 0 ? /*#__PURE__*/_jsxDEV(\"h5\", {\n          style: {\n            color: \"green\",\n            cursor: 'pointer'\n          },\n          onClick: handleResendOtp,\n          children: \"Resend OTP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 34\n        }, this) : /*#__PURE__*/_jsxDEV(\"h5\", {\n          style: {\n            color: \"#828282\"\n          },\n          children: [\"Resend OTP in \", timeLeft, \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 128\n        }, this), /*#__PURE__*/_jsxDEV(Wrapper, {\n          chgClr: full,\n          children: /*#__PURE__*/_jsxDEV(InputBox, {\n            boxes: 6,\n            operation: handleOtpChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 15\n        }, this), full ? /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: 'red'\n          },\n          children: \"Code is not Valid\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 24\n        }, this) : null, isVerifyButton ? /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleVerifyOtp,\n          color: \"primary\",\n          children: \"Verify and Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 19\n        }, this) : /*#__PURE__*/_jsxDEV(Button, {\n          disabled: true,\n          color: \"primary\",\n          children: \"Verify and Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 13\n      }, this) : null, /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleClose,\n        color: \"primary\",\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(SignIn, \"3r21AOGZyB2v9SPKjHS4vxvOXTk=\", false, function () {\n  return [useStyles, useDispatch, useSelector];\n});\n\n_c2 = SignIn;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Wrapper\");\n$RefreshReg$(_c2, \"SignIn\");","map":{"version":3,"sources":["/home/madhu/Documents/DoneGo/Client/src/Components/SignIn.jsx"],"names":["React","axios","Button","TextField","Dialog","DialogContent","DialogContentText","DialogTitle","fade","makeStyles","InputBox","styled","IconButton","useHistory","Redirect","Link","AccountCircleIcon","useDispatch","useSelector","loginSuccess","intervalId","Wrapper","div","props","chgClr","Showvalue","useStyles","theme","root","flexGrow","ButtonBackground","backgroundColor","borderRadius","padding","fontWeight","fontSize","cursor","color","SignIn","open","setOpen","useState","classes","dispatch","mobile","setMobile","isMobileValid","setIsMobileValid","isOtpSent","setIsOtpSent","isMobileDisabled","setMobileDisabled","undefined","pinValue","setPinValue","full","setFull","timeLeft","setTimeLeft","isVerifyButton","setIsVerifyButton","isAuth","state","user","useEffect","setInterval","clearInterval","handleMobileChange","e","target","value","toString","length","Number","handleSentOtp","get","params","then","res","data","status","console","log","handleEditNumber","handleResendOtp","handleOtpChange","inpLen","split","code","message","window","localStorage","setItem","accessToken","handleClose","handleVerifyOtp","handleClickOpen","slice"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios'\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { fade, makeStyles } from '@material-ui/core/styles';\nimport InputBox from './InputBox'\nimport styled from \"styled-components\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { useHistory, Redirect, Link } from 'react-router-dom'\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport {loginSuccess} from '../Redux/User/action'\n\nvar intervalId = 0\nconst Wrapper = styled.div`\n\tposition:relative;\n\tpadding: 25px 25px 100px 25px;\n\tbackground-color:#ffffff;\n\tborder-radius:5px;\n\t> h2{\n\t\ttext-align:center\n\t}\n\t> div > input{\n\t\tbackground-color: 'white';\n\t\tcolor:#000;\n\t\tborder-radius:5px;\n\t\tborder:  ${(props) => !props.chgClr ? '1px solid black' : '1px solid red'};\n\t\t\n\t}\n`;\n\nconst Showvalue = styled.div`\n\tfont-size: 20px;\n\tposition:absolute;\n\tleft: 10vw;\n\tcolor: black;\n`\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  ButtonBackground: {\n    backgroundColor: 'rgb(0, 210, 144)',\n    borderRadius: '20px',\n    padding: '8px 20px',\n    fontWeight: 'bold',\n    fontSize: '12px',\n    cursor: 'pointer',\n    color: 'white',\n  },\n}));\n\nexport default function SignIn() {\n  const [open, setOpen] = React.useState(false);\n  const classes = useStyles();\n  const dispatch = useDispatch()\n  const [mobile, setMobile] = React.useState(\"\");\n  const [isMobileValid, setIsMobileValid] = React.useState(false)\n  const [isOtpSent, setIsOtpSent] = React.useState(false)\n  const [isMobileDisabled, setMobileDisabled] = React.useState(undefined)\n  const [pinValue, setPinValue] = React.useState('')\n  const [full, setFull] = React.useState(undefined)\n  const [timeLeft, setTimeLeft] = React.useState(30)\n  const [isVerifyButton, setIsVerifyButton] = React.useState(false)\n  const isAuth = useSelector((state) => state.user.isAuth);\n\n  React.useEffect(() => {\n    if (isOtpSent) {\n      if (!timeLeft) return;\n      intervalId = setInterval(() => {\n        setTimeLeft(timeLeft - 1);\n      }, 1000);\n\n      return () => {\n        clearInterval(intervalId);\n      };\n    }\n\n  }, [timeLeft, isOtpSent]);\n\n\n  const handleMobileChange = (e) => {\n    setMobile(e.target.value)\n    if (e.target.value.toString().length === 10) {\n      if (Number(e.target.value.toString()[0]) > 5) {\n        setIsMobileValid(true)\n      }\n      else {\n        setIsMobileValid(false)\n      }\n    }\n    else {\n      setIsMobileValid(false)\n    }\n  }\n\n  const handleSentOtp = () => {\n    //API call for sent OTP\n    axios.get('http://localhost:5000/user/loginOtp', {\n      params: {\n        mobile: mobile\n      }\n    })\n      .then(res => {\n        if (res.data.status === 'pending') {\n          setIsOtpSent(true)\n          setMobileDisabled(true)\n        }\n        console.log(res.data)\n      })\n  }\n\n  const handleEditNumber = () => {\n    setMobileDisabled(false)\n    setIsOtpSent(false)\n    setIsVerifyButton(false)\n    setTimeLeft(30)\n  }\n  const handleResendOtp = () => {\n    //API call for sent OTP\n    axios.get('http://localhost:5000/user/loginOtp', {\n      params: {\n        mobile: mobile\n      }\n    })\n      .then(res => {\n        if (res.data.status === 'pending') {\n          setIsOtpSent(true)\n          setTimeLeft(30)\n        }\n        console.log(res.data)\n      })\n  }\n\n  const handleOtpChange = (value, inpLen) => {\n    setPinValue(value)\n    setFull(value.split(\"\").length === inpLen ? true : false)\n    if (value.split(\"\").length === 6) {\n      // API call for Verify OTP\n      setIsVerifyButton(true)\n      setFull(false)\n      axios.get('http://localhost:5000/user/verify', {\n        params: {\n          mobile: mobile,\n          code: value\n        }\n      })\n        .then(res => {\n          if (res.data.message === 'Wrong OTP, Please try again') {\n            setFull(true)\n          }\n          else {\n            window.localStorage.setItem('token', res.data.accessToken)\n            setFull(false)\n            handleClose()\n            //alert(res.data.message)\n            dispatch(loginSuccess())\n            console.log(res.data)\n          }\n        })\n    }\n    else {\n      setFull(false)\n      setIsVerifyButton(false)\n    }\n  }\n\n  const handleVerifyOtp = () => {\n    // API call for Verify OTP\n    axios.get('http://localhost:5000/user/verify', {\n      params: {\n        mobile: mobile,\n        code: pinValue\n      }\n    })\n      .then(res => {\n        if (res.data.message === 'Wrong OTP, Please try again') {\n          setFull(true)\n        }\n        else {\n          window.localStorage.setItem('token', res.data.accessToken)\n          setFull(false)\n          handleClose()\n          //alert(res.data.message)\n          dispatch(loginSuccess())\n          console.log(res.data)\n        }\n      })\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false)\n    setMobile('')\n    setTimeLeft(30)\n    setIsOtpSent(false)\n    setMobileDisabled(undefined)\n    setIsVerifyButton(false)\n    setPinValue('')\n  };\n\n  return (\n    <>\n     {!isAuth? \n          <Button          \n            className={classes.ButtonBackground}\n            color=\"inherit\"\n            onClick={handleClickOpen}\n          >\n            Sign In\n          </Button>\n          :  <Link to=\"/order/profile\" ><IconButton style={{color:\"rgb(0, 210, 144)\",backgroundColor: \"white\",padding:\"0px\"}} aria-label=\"add to shopping cart\"  >\n            <AccountCircleIcon fontSize=\"large\"/>\n          </IconButton></Link>} \n\n      {/* <Button style={{ marginRight: '100px', textTransform: \"none\" }} className={classes.ButtonBackground} color=\"inherit\" onClick={handleClickOpen}>\n        Sign In</Button> */}\n      <Dialog open={open} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Login</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            To subscribe to this website, please enter your email address here. We will send updates\n            occasionally.\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"number\"\n            type=\"number\"\n            fullWidth\n            value={mobile}\n            disabled={isMobileDisabled}\n            onChange={handleMobileChange}\n            onInput={(e) => e.target.value = e.target.value.slice(0, 10)}\n          />\n        </DialogContent>\n        {\n          !isMobileValid ?\n            <Button disabled color=\"primary\">\n              Send OTP\n          </Button>\n\n            :\n            !isOtpSent ?\n              <Button onClick={handleSentOtp} color=\"primary\">\n                Send OTP\n            </Button>\n              :\n              <Button onClick={handleEditNumber} color=\"primary\">\n                Edit Number\n          </Button>\n        }\n        {\n          isOtpSent ?\n            <div>\n              {\n                timeLeft === 0 ? <h5 style={{ color: \"green\", cursor: 'pointer' }} onClick={handleResendOtp}>Resend OTP</h5> : <h5 style={{ color: \"#828282\" }}>Resend OTP in {timeLeft}s</h5>\n              }\n              <Wrapper chgClr={full}>\n                <InputBox boxes={6} operation={handleOtpChange} />\n              </Wrapper>\n              {\n                full ? <p style={{color:'red'}}>Code is not Valid</p> : null\n              }\n              {\n                isVerifyButton ?\n                  <Button onClick={handleVerifyOtp} color=\"primary\">\n                    Verify and Submit\n                  </Button>\n                  :\n                  <Button disabled color=\"primary\">\n                    Verify and Submit\n                  </Button>\n              }\n            </div>\n            :\n            null\n        }\n          <Button onClick={handleClose} color=\"primary\">\n            Close\n          </Button>\n      </Dialog>\n\n    </>\n  );\n}"]},"metadata":{},"sourceType":"module"}