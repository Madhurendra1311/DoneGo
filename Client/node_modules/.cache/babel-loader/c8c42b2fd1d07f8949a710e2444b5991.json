{"ast":null,"code":"import { CART_ITEMS, GET_RESTAURANTS, SELECT_RESTAURANT, ADD_CART_RESTAURANT } from './actionTypes';\nconst initState = {\n  isLoading: false,\n  restaurantData: [],\n  restaurantItems: [],\n  cartItems: [],\n  isError: false,\n  restaurantName: '',\n  restaurantId: '',\n  cartRestaurant: '',\n  cartRestaurantId: '',\n  totalCartValue: 0,\n  totalCartItems: 0\n};\n\nconst reducer = (state = initState, {\n  type,\n  payload\n}) => {\n  // console.log(type, payload);\n  switch (type) {\n    case GET_RESTAURANTS.REQUEST:\n      {\n        return { ...state,\n          isLoading: true,\n          isError: false\n        };\n      }\n\n    case GET_RESTAURANTS.SUCCESS:\n      {\n        return { ...state,\n          restaurantData: payload,\n          isLoading: false\n        };\n      }\n\n    case GET_RESTAURANTS.FAILURE:\n      {\n        return { ...state,\n          isError: true,\n          isLoading: false\n        };\n      }\n\n    case SELECT_RESTAURANT:\n      {\n        let seletedRestaurant = state.restaurantData.filter(item => item._id === payload._id)[0];\n\n        for (let i = 0; i < seletedRestaurant.foodItems.length; i++) {\n          for (let j = 0; j < state.cartItems.length; j++) {\n            if (seletedRestaurant.foodItems[i]._id === state.cartItems[j]._id) {\n              seletedRestaurant.foodItems[i].quantity = state.cartItems[j].quantity;\n            }\n          }\n        }\n\n        return { ...state,\n          restaurantId: seletedRestaurant._id,\n          restaurantName: seletedRestaurant.restaurentName,\n          restaurantItems: seletedRestaurant.foodItems\n        };\n      }\n\n    case CART_ITEMS.ADD:\n      {\n        let addedItems = state.cartItems.find(item => item._id === payload._id);\n        let restaurantItem = state.restaurantItems.find(item => item._id === payload._id);\n\n        if (addedItems) {\n          addedItems.quantity += 1;\n          return { ...state,\n            totalCartValue: state.totalCartValue + addedItems.itemPrice,\n            totalCartItems: state.totalCartItems + 1,\n            cartRestaurantId: state.restaurantId,\n            cartRestaurant: state.restaurantName,\n            cartItems: state.cartItems,\n            restaurantItems: state.restaurantItems\n          };\n        } else {\n          payload.quantity = 1;\n          return { ...state,\n            totalCartItems: state.totalCartItems + payload.quantity,\n            totalCartValue: state.totalCartValue + payload.itemPrice,\n            cartItems: [...state.cartItems, payload],\n            restaurantItems: state.restaurantItems\n          };\n        }\n      }\n\n    case CART_ITEMS.REMOVE:\n      {\n        let removeItems = state.cartItems.find(item => item._id === payload);\n        let restaurantItem = state.restaurantItems.find(item => item._id === payload);\n\n        if (removeItems) {\n          if (removeItems.quantity === 1) {\n            let newItems = state.cartItems.filter(item => item._id !== payload);\n            restaurantItem.quantity = 0;\n            return { ...state,\n              totalCartValue: state.totalCartValue - removeItems.itemPrice,\n              totalCartItems: state.totalCartItems - 1,\n              cartItems: newItems,\n              restaurantItems: state.restaurantItems\n            };\n          } else {\n            removeItems.quantity -= 1;\n            return { ...state,\n              totalCartValue: state.totalCartValue - removeItems.itemPrice,\n              totalCartItems: state.totalCartItems - 1,\n              cartItems: state.cartItems,\n              restaurantItems: state.restaurantItems\n            };\n          }\n        }\n      }\n\n    case ADD_CART_RESTAURANT:\n      {\n        return { ...state,\n          cartRestaurant: payload.name,\n          cartRestaurantId: payload.id\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["/home/madhu/Documents/DoneGo/Client/src/Redux/Restaurant/reducer.js"],"names":["CART_ITEMS","GET_RESTAURANTS","SELECT_RESTAURANT","ADD_CART_RESTAURANT","initState","isLoading","restaurantData","restaurantItems","cartItems","isError","restaurantName","restaurantId","cartRestaurant","cartRestaurantId","totalCartValue","totalCartItems","reducer","state","type","payload","REQUEST","SUCCESS","FAILURE","seletedRestaurant","filter","item","_id","i","foodItems","length","j","quantity","restaurentName","ADD","addedItems","find","restaurantItem","itemPrice","REMOVE","removeItems","newItems","name","id"],"mappings":"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","sourcesContent":["import { CART_ITEMS, GET_RESTAURANTS, SELECT_RESTAURANT, ADD_CART_RESTAURANT } from './actionTypes'\n\nconst initState = {\n  isLoading: false,\n  restaurantData: [],\n  restaurantItems: [],\n  cartItems: [],\n  isError: false,\n  restaurantName: '',\n  restaurantId: '',\n  cartRestaurant:'',\n  cartRestaurantId:'',\n  totalCartValue: 0,\n  totalCartItems: 0\n}\n\n\nconst reducer = (state = initState, { type, payload }) => {\n  // console.log(type, payload);\n  switch (type) {\n    case GET_RESTAURANTS.REQUEST:{\n      return {\n        ...state,\n        isLoading: true,\n        isError: false\n      };\n    }\n\n    case GET_RESTAURANTS.SUCCESS:{\n      return {\n        ...state,\n        restaurantData: payload,\n        isLoading: false\n      };\n    }\n\n    case GET_RESTAURANTS.FAILURE:{\n      return {\n        ...state,\n        isError: true,\n        isLoading: false\n      };\n    }\n\n    case SELECT_RESTAURANT: {\n      let seletedRestaurant = state.restaurantData.filter(item => item._id === payload._id)[0]\n      for(let i = 0; i < seletedRestaurant.foodItems.length; i++){\n        for(let j = 0; j < state.cartItems.length; j++){\n          if(seletedRestaurant.foodItems[i]._id === state.cartItems[j]._id){\n            seletedRestaurant.foodItems[i].quantity = state.cartItems[j].quantity\n          }\n        }\n      }\n      return{\n        ...state,\n        restaurantId: seletedRestaurant._id,\n        restaurantName: seletedRestaurant.restaurentName,\n        restaurantItems: seletedRestaurant.foodItems\n      }\n    }\n\n    case CART_ITEMS.ADD: {\n        let addedItems = state.cartItems.find(item => item._id === payload._id)\n        let restaurantItem = state.restaurantItems.find(item=> item._id === payload._id)\n        if(addedItems){\n          addedItems.quantity += 1\n          return {\n            ...state,\n            totalCartValue: state.totalCartValue + addedItems.itemPrice,\n            totalCartItems: state.totalCartItems + 1,\n            cartRestaurantId: state.restaurantId,\n            cartRestaurant: state.restaurantName,\n            cartItems: state.cartItems,\n            restaurantItems: state.restaurantItems\n          }\n        }\n        else{\n          payload.quantity = 1\n          return {\n            ...state,\n            totalCartItems: state.totalCartItems + payload.quantity,\n            totalCartValue: state.totalCartValue + payload.itemPrice,\n            cartItems: [...state.cartItems, payload],\n            restaurantItems: state.restaurantItems\n          }\n        }\n    }\n\n    case CART_ITEMS.REMOVE: {\n      let removeItems = state.cartItems.find(item => item._id === payload)\n      let restaurantItem = state.restaurantItems.find(item=> item._id === payload)\n\n      if(removeItems){\n        if(removeItems.quantity === 1){\n          let newItems = state.cartItems.filter(item => item._id !== payload)\n          restaurantItem.quantity = 0\n          return {\n            ...state,\n            totalCartValue: state.totalCartValue - removeItems.itemPrice,\n            totalCartItems: state.totalCartItems - 1,\n            cartItems: newItems,\n            restaurantItems: state.restaurantItems\n          }\n        }\n        else{\n          removeItems.quantity -= 1\n          return {\n            ...state,\n            totalCartValue: state.totalCartValue - removeItems.itemPrice,\n            totalCartItems: state.totalCartItems - 1,\n            cartItems: state.cartItems,\n            restaurantItems: state.restaurantItems\n          }\n        }\n      }\n  }\n  case ADD_CART_RESTAURANT: {\n    return {\n      ...state,\n      cartRestaurant: payload.name,\n      cartRestaurantId: payload.id,\n    }\n  }\n    default:\n      return state;\n  }\n};\n\nexport default reducer;"]},"metadata":{},"sourceType":"module"}